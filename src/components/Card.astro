---
import { formatDate } from '@/utils/date';
interface Props {
  blog: {
    slug: string;
    data: {
      title: string;
      date: string;
    };
    body: string;
  }
}

const { blog } = Astro.props;
---

<ul
  data-slug={blog.slug}
  class="bg-[#E4DFCD] dark:bg-[#191B26] cursor-pointer hover:scale-101 transition-transform transition-ease-in-out transition-duration-300 rounded-lg w-90% md:w-80% lg:w-70% xl:w-60% 2xl:w-50% p-6">
  <div class="font-700 text-2xl mb-2">
    {blog.data.title}
  </div>
  <div class="xl:line-clamp-2 line-clamp-3 mb-2">
    {blog.body.slice(0, 300)}
  </div>
  <time class="text-sm">
    {formatDate(blog.data.date)}
  </time>
</ul>

<script>
const uls = document.querySelectorAll('ul')
if(uls)
  uls.forEach((ul) => {
    ul.addEventListener('click', () => {
      const slugStr = ul.getAttribute('data-slug') as string
      const [lang, ...slug] = slugStr.split('/')
      window.location.href = `/${lang}/blog/${slug.join('/')}`
    })
  })
</script>