---
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en" class="dark">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
    <script>
      const themeCache = window.localStorage.getItem('theme')
      if(themeCache === 'light') {
        document.documentElement.classList.value = 'light'
      } else {
        document.documentElement.classList.value = 'dark'
      }
    </script>
	</head>
	<body class="dark:bg-dark bg-light dark:text-dark text-light relative flex flex-col min-h-screen">
    <header class="w-full backdrop-blur-xl fixed left-0 top-0 flex justify-between z-20">
      <div
        class="i-mdi-dinosaur-pixel w-10 h-10 mx-2 my-1 hover:cursor-pointer hover:opacity-80"
        onclick="window.location.href = '/'"
      />
      <div class="flex">
        <div
          class="action-btn i-mdi-github w-6 h-6 m-2 hover:cursor-pointer hover:opacity-80"
        />
        <div
          class="action-btn i-mdi-rss w-6 h-6 m-2 hover:cursor-pointer hover:opacity-80"
        />
        <div
          class="action-btn i-mdi-theme-light-dark w-6 h-6 m-2 hover:cursor-pointer hover:opacity-80"
        />
      </div>
    </header>
    <div class="py-20 flex-grow-1">
      <slot />
    </div>
    <footer class="absolute bottom-0 text-center w-full font-450">
      &copy; 2019 Ray-D-Song. All Rights Reserved
    </footer>
	</body>
</html>

<script>
const actionBtns = document.querySelectorAll('.action-btn')
actionBtns.forEach((btn) => {
  btn.addEventListener('click', () => {
    switch (btn.classList[1]) {
      case 'i-mdi-github':
        window.open('https://github.com/ray-d-song')
      break
      case 'i-mdi-rss':
        window.open('https://ray-d-song.com/feed.xml')
      break
      case 'i-mdi-theme-light-dark':
        toggleTheme()
    }
  })
})

function toggleTheme() {
  const theme = document.documentElement.classList[0]
  if (theme === 'dark') {
    document.documentElement.classList.value = 'light'
    window.localStorage.setItem('theme', 'light')
  } else {
    document.documentElement.classList.value = 'dark'
    window.localStorage.setItem('theme', 'dark')
  }
}
</script>

<style is:global>
html.dark .astro-code,
html.dark .astro-code span {
	color: var(--shiki-dark) !important;
	background-color: var(--shiki-dark-bg) !important;
	font-style: var(--shiki-dark-font-style) !important;
	font-weight: var(--shiki-dark-font-weight) !important;
	text-decoration: var(--shiki-dark-text-decoration) !important;
}
</style>