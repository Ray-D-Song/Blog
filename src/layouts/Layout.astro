---
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html class="dark">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
    <script>
      const themeCache = window.localStorage.getItem('theme')
      if(themeCache === 'light') {
        document.documentElement.classList.value = 'light'
      } else {
        document.documentElement.classList.value = 'dark'
      }
    </script>
	</head>
	<body class="dark:bg-dark bg-light dark:text-dark text-light relative flex flex-col min-h-screen w-full">
    <header class="w-full backdrop-blur-xl fixed left-0 top-0 flex justify-between z-20">
      <div
        class="i-mdi-dinosaur-pixel w-10 h-10 mx-2 my-1 hover:cursor-pointer hover:opacity-80"
        onclick="window.location.href = '/'"
      />
      <div class="flex">
        <div
          class="action-btn i-mdi-github w-6 h-6 m-2 hover:cursor-pointer hover:opacity-80"
        />
        <div
          class="action-btn i-mdi-rss w-6 h-6 m-2 hover:cursor-pointer hover:opacity-80"
        />
        <div
          class="action-btn i-mdi-theme-light-dark w-6 h-6 m-2 hover:cursor-pointer hover:opacity-80"
        />
      </div>
    </header>
    <div class="py-20 flex-grow-1">
      <slot />
    </div>
    <footer class="absolute bottom-0 text-center w-full font-450">
      &copy; 2019 Ray-D-Song. All Rights Reserved
    </footer>
	</body>
</html>

<script>
const actionBtns = document.querySelectorAll('.action-btn')
actionBtns.forEach((btn) => {
  btn.addEventListener('click', () => {
    switch (btn.classList[1]) {
      case 'i-mdi-github':
        window.open('https://github.com/ray-d-song')
      break
      case 'i-mdi-rss':
        window.open('https://ray-d-song.com/feed.xml')
      break
      case 'i-mdi-theme-light-dark':
        toggleTheme()
    }
  })
})

function toggleTheme() {
  const theme = document.documentElement.classList[0]
  if (theme === 'dark') {
    document.documentElement.classList.value = 'light'
    window.localStorage.setItem('theme', 'light')
  } else {
    document.documentElement.classList.value = 'dark'
    window.localStorage.setItem('theme', 'dark')
  }
}
</script>

<style is:global>
html.dark .astro-code,
html.dark .astro-code span {
	color: var(--shiki-dark) !important;
	background-color: var(--shiki-dark-bg) !important;
	font-style: var(--shiki-dark-font-style) !important;
	font-weight: var(--shiki-dark-font-weight) !important;
	text-decoration: var(--shiki-dark-text-decoration) !important;
}

p > code {
  white-space: unset !important;
}

.copy {
  display: flex;
  justify-content: space-between;
  border-bottom: 1px solid currentColor;
  margin-top: -10px;
  margin-bottom: 10px;
  padding-bottom: 5px;
}

.copy-icon {
  display: inline-block;
  width: 18px;
  height: 18px;
  --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12z'/%3E%3C/svg%3E");
  background-color: currentColor;
  -webkit-mask-image: var(--svg);
  mask-image: var(--svg);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
  cursor: pointer;
}

.check-icon {
  display: inline-block;
  width: 18px;
  height: 18px;
  --svg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23000' d='M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59z'/%3E%3C/svg%3E");
  background-color: currentColor;
  -webkit-mask-image: var(--svg);
  mask-image: var(--svg);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
  cursor: pointer;
}

.line-num {
  margin-right: 18px;
}
</style>